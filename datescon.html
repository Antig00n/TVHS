<!DOCTYPE html>
<html lang="en"> 
<head>
 <link rel="icon" type="image/png" href="favicon.ico">
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale =1" />
  <title>TVHS</title>

<link rel="stylesheet" href="css/reset.css">
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
    rel="stylesheet"/>

    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/shows.css">
</head>
<body>
  <!-- NAVBAR -->
   <div class="navvy">
<nav class="navbar navbar-expand-lg ">
  <div class="container-fluid d-flex flex-column flex-lg-row align-items-center justify-content-center gap-3">

    <!-- Guytje -->
    <div class="guytje order-0 mb-2 mb-lg-0 order-lg-0" style="width: 5%;">
      <img src="img/guytje2.png" class="img-fluid" alt="Cartoon placeholder" />
    </div>

    <!-- Left nav (SHOWS) -->
    <ul class="navbar-nav d-flex flex-column flex-lg-row align-items-center order-2 order-lg-1 p-0 m-0">
      <li class="nav-item d-flex align-items-center">
        <a class="nav-link px-2 py-1" href="TVHS.html">SHOWS</a>
      </li>
       <li class="nav-item d-flex align-items-center">
        <a class="nav-link px-2 py-1" href="muziek.html">MUSIC</a>
      </li>
    </ul>

    <!-- Logo -->
     
    <a class="navbar-brand order-1 order-lg-2 my-2 my-lg-0 px-2" href="index.html">
      <img class="logo" src="img/TVHSLL.png" alt="Logo">
    </a>

    <!-- Right nav (MUSIC and DATES) -->
    <ul class="navbar-nav d-flex flex-column flex-lg-row align-items-center order-3 p-0 m-0">
    <li class="nav-item d-flex align-items-center">
        <a class="nav-link px-2 py-1 "  href="merch.html">MERCH</a>
      </li>
      
      <li class="nav-item d-flex align-items-center">
        <a class="nav-link px-2 py-1  btn-sm btn-red-active " id="dates" href="datescon.html">DATES & CONTACT</a>
      </li>
  
    </ul>

  </div>
</nav>
</div>


<main>


<div id="upcoming-shows-container">
  <h2 style="text-align: center; margin-bottom: 1rem;">Upcoming Shows</h2>
  <div id="upcoming-shows"></div>
</div>



</main>


  <!-- FOOTER -->
  <footer class="footers">
    <div class="footer-logos">
      <img src="img/yuhd.png" alt="VHS logo" />
      <img class="footer-white" src="img/vhs.png" alt="VHS logo" />
    </div>
  </footer>

  <!-- Bootstrap JS bundle (includes Popper) -->
  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
  ></script>

<script>
  async function loadShows() {
    const container = document.getElementById('upcoming-shows');
    try {
      const res = await fetch('/.netlify/functions/get-shows');
      const shows = await res.json();

      if (!Array.isArray(shows)) {
        container.textContent = 'Failed to load shows.';
        return;
      }

      if (shows.length === 0) {
        container.textContent = 'No upcoming shows.';
        return;
      }

      const list = document.createElement('ul');

      for (const show of shows) {
        const li = document.createElement('li');

        let text = `${show.showperson} | ${new Date(show.showdate).toLocaleDateString()} | ${show.showplace}`;

        if (show.showprice !== null && show.showprice !== undefined) {
          text += ` | Price: ${show.showprice}`;
        }
        if (show.showsite) {
          text += ` | Site: ${show.showsite}`;
        }

        li.textContent = text;
        list.appendChild(li);
      }

      container.innerHTML = '';
      container.appendChild(list);

    } catch (e) {
      container.textContent = 'Error loading shows.';
      console.error(e);
    }
  }

  loadShows();
</script>
</body>
</html>