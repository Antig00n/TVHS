<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>YouTube Channel Player + Movie Slider</title>
<style>
  body {
    background-color: #121212;
    color: white;
    font-family: Arial, sans-serif;
    padding: 30px;
  }

  #youtubePlayerContainer {
    max-width: 640px;
    margin: 0 auto 20px auto;
    position: relative;
  }

  #youtubePlayer {
    width: 100%;
    height: 360px;
    background: black;
  }

  #muteBtn {
    position: absolute;
    top: 8px;
    right: 8px;
    z-index: 10;
    padding: 6px 12px;
    background-color: #65001c;
    border: none;
    color: white;
    cursor: pointer;
    font-weight: bold;
    border-radius: 4px;
  }

  #movieSlider {
    display: flex;
    gap: 10px;
    overflow-x: auto;
    scroll-behavior: smooth;
    padding-bottom: 10px;
    max-width: 100%;
    margin-bottom: 10px;
  }

  .movieCard {
    background: #222;
    border-radius: 8px;
    min-width: 180px;
    flex-shrink: 0;
    cursor: pointer;
    box-shadow: 0 0 8px #65001c;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 5px;
  }

  .movieCard img {
    width: 100%;
    border-radius: 6px;
  }

  .movieTitle {
    margin-top: 6px;
    font-size: 14px;
    text-align: center;
    color: #ac51b5;
  }

  /* Popup styling */
  #overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(18, 18, 18, 0.9);
    display: none;
    z-index: 1000;
  }

  #videoPopup {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: #1e1e1e;
    padding: 20px;
    border-radius: 10px;
    max-width: 90vw;
    max-height: 90vh;
    overflow: auto;
    display: none;
    z-index: 1001;
    color: white;
  }

  #videoPopup iframe {
    width: 560px;
    max-width: 100%;
    height: 315px;
    border: none;
    border-radius: 6px;
  }

  .button-column button {
    background: #65001c;
    border: none;
    color: white;
    padding: 6px 12px;
    margin-bottom: 5px;
    cursor: pointer;
    border-radius: 4px;
    font-weight: bold;
  }

  .description-box {
    max-height: 100px;
    overflow-y: auto;
    margin-left: 15px;
    flex-grow: 1;
  }

  /* YOUR CUSTOM SLIDER STYLE ONLY */
  input[type=range] {
    -webkit-appearance: none;
    margin: 10px 0;
    width: 100%;
  }
  input[type=range]:focus {
    outline: none;
  }
  input[type=range]::-webkit-slider-runnable-track {
    width: 100%;
    height: 12.8px;
    cursor: pointer;
    box-shadow: 0px 0px 0px #000000, 0px 0px 0px #0d0d0d;
    background: #ac51b5;
    border-radius: 25px;
    border: 0px solid #000101;
  }
  input[type=range]::-webkit-slider-thumb {
    box-shadow: 0px 0px 0px #000000, 0px 0px 0px #0d0d0d;
    border: 0px solid #000000;
    height: 20px;
    width: 39px;
    border-radius: 7px;
    background: #65001c;
    cursor: pointer;
    -webkit-appearance: none;
    margin-top: -3.6px;
  }
  input[type=range]:focus::-webkit-slider-runnable-track {
    background: #ac51b5;
  }
  input[type=range]::-moz-range-track {
    width: 100%;
    height: 12.8px;
    cursor: pointer;
    animate: 0.2s;
    box-shadow: 0px 0px 0px #000000, 0px 0px 0px #0d0d0d;
    background: #ac51b5;
    border-radius: 25px;
    border: 0px solid #000101;
  }
  input[type=range]::-moz-range-thumb {
    box-shadow: 0px 0px 0px #000000, 0px 0px 0px #0d0d0d;
    border: 0px solid #000000;
    height: 20px;
    width: 39px;
    border-radius: 7px;
    background: #65001c;
    cursor: pointer;
  }
  input[type=range]::-ms-track {
    width: 100%;
    height: 12.8px;
    cursor: pointer;
    animate: 0.2s;
    background: transparent;
    border-color: transparent;
    border-width: 39px 0;
    color: transparent;
  }
  input[type=range]::-ms-fill-lower {
    background: #ac51b5;
    border: 0px solid #000101;
    border-radius: 50px;
    box-shadow: 0px 0px 0px #000000, 0px 0px 0px #0d0d0d;
  }
  input[type=range]::-ms-fill-upper {
    background: #ac51b5;
    border: 0px solid #000101;
    border-radius: 50px;
    box-shadow: 0px 0px 0px #000000, 0px 0px 0px #0d0d0d;
  }
  input[type=range]::-ms-thumb {
    box-shadow: 0px 0px 0px #000000, 0px 0px 0px #0d0d0d;
    border: 0px solid #000000;
    height: 20px;
    width: 39px;
    border-radius: 7px;
    background: #65001c;
    cursor: pointer;
  }
  input[type=range]:focus::-ms-fill-lower {
    background: #ac51b5;
  }
  input[type=range]:focus::-ms-fill-upper {
    background: #ac51b5;
  }
</style>
</head>
<body>

<div id="youtubePlayerContainer">
  <div id="youtubePlayer"></div>
  <button id="muteBtn">Mute</button>
</div>

<div id="movieSlider" aria-label="Video thumbnails slider" role="list"></div>

<input type="range" id="scrollRange" min="0" max="100" value="0" aria-label="Scroll slider for movie thumbnails">

<div id="overlay"></div>
<div id="videoPopup"></div>

<script>
  // YouTube Iframe API loading
  let tag = document.createElement('script');
  tag.src = "https://www.youtube.com/iframe_api";
  document.head.appendChild(tag);

  let youtubePlayer;
  let playlist = [];
  let currentIndex = 0;
  let isMuted = false;

  const muteBtn = document.getElementById('muteBtn');
  const movieSlider = document.getElementById('movieSlider');
  const overlay = document.getElementById('overlay');
  const videoPopup = document.getElementById('videoPopup');
  const scrollRange = document.getElementById('scrollRange');

  // Sample playlist data - replace with your own or fetch dynamically
  playlist = [
    {videoId: 'dQw4w9WgXcQ', title: 'Never Gonna Give You Up', description: 'Classic Rick Astley!'},
    {videoId: '9bZkp7q19f0', title: 'Gangnam Style', description: 'PSY - Gangnam Style'},
    {videoId: '3JZ_D3ELwOQ', title: 'Charlie Puth - We Donâ€™t Talk Anymore', description: 'Official Video'},
  ];

  function renderMovieSlider() {
    movieSlider.innerHTML = '';
    playlist.forEach(({videoId, title, description}, index) => {
      const thumbUrl = `https://img.youtube.com/vi/${videoId}/mqdefault.jpg`;
      const card = document.createElement('div');
      card.className = 'movieCard';
      card.setAttribute('role', 'listitem');
      card.tabIndex = 0;
      card.innerHTML = `
        <img src="${thumbUrl}" alt="Thumbnail for ${title}" />
        <div class="movieTitle">${title}</div>
      `;
      card.addEventListener('click', () => {
        currentIndex = index;
        showYouTubeVideo(videoId, description);
      });
      card.addEventListener('keypress', (e) => {
        if (e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          card.click();
        }
      });
      movieSlider.appendChild(card);
    });
  }

  // Load video in main player by index
  function loadVideo(index) {
    currentIndex = index;
    const videoId = playlist[index]?.videoId;
    if (youtubePlayer && videoId) {
      youtubePlayer.loadVideoById(videoId);
    }
  }

  // Show video in popup with description
  function showYouTubeVideo(videoId, description = '') {
    videoPopup.innerHTML = `
      <iframe src="https://www.youtube.com/embed/${videoId}?autoplay=1&enablejsapi=1&rel=0&modestbranding=1" allow="autoplay; encrypted-media" allowfullscreen></iframe>
      <p style="margin-top: 10px;">${description}</p>
    `;
    overlay.style.display = 'block';
    videoPopup.style.display = 'block';
  }

  // Close popup
  overlay.addEventListener('click', () => {
    videoPopup.style.display = 'none';
    overlay.style.display = 'none';
    if (youtubePlayer) youtubePlayer.pauseVideo();
  });

  window.onYouTubeIframeAPIReady = function () {
    youtubePlayer = new YT.Player('youtubePlayer', {
      height: '360',
      width: '640',
      videoId: playlist[0].videoId,
      playerVars: {
        autoplay: 1,
        controls: 1,
        rel: 0,
        modestbranding: 1,
      },
      events: {
        'onReady': (event) => {
          event.target.playVideo();
          updateMuteButton();
        },
        'onStateChange': onPlayerStateChange,
      }
    });
  };

  function onPlayerStateChange(event) {
    if (event.data === YT.PlayerState.ENDED) {
      // Play next video in playlist
      currentIndex = (currentIndex + 1) % playlist.length;
      loadVideo(currentIndex);
    }
  }

  muteBtn.addEventListener('click', () => {
    if (!youtubePlayer) return;
    if (isMuted) {
      youtubePlayer.unMute();
      isMuted = false;
    } else {
      youtubePlayer.mute();
      isMuted = true;
    }
    updateMuteButton();
  });

  function updateMuteButton() {
    muteBtn.textContent = isMuted ? 'Unmute' : 'Mute';
  }

  // Initialize slider and movie cards
  renderMovieSlider();

  // Connect the input[type=range] to scroll the movie slider
  scrollRange.addEventListener('input', () => {
    const maxScrollLeft = movieSlider.scrollWidth - movieSlider.clientWidth;
    const scrollValue = (scrollRange.value / 100) * maxScrollLeft;
    movieSlider.scrollLeft = scrollValue;
  });

  // Sync slider value when user scrolls the movieSlider manually
  movieSlider.addEventListener('scroll', () => {
    const maxScrollLeft = movieSlider.scrollWidth - movieSlider.clientWidth;
    if (maxScrollLeft > 0) {
      scrollRange.value = (movieSlider.scrollLeft / maxScrollLeft) * 100;
    } else {
      scrollRange.value = 0;
    }
  });
</script>

</body>
</html>
